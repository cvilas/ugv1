//==============================================================================
// Project  : UGV1
// Module   : Agent
// File     : AgentMessenger.cpp
//==============================================================================

#include "AgentMessenger.h"

namespace Ugv1
{

//==============================================================================
AgentMessenger::AgentMessenger(const std::string& url)
//==============================================================================
    : QThread(), _exitFlag(false)
{
}


//------------------------------------------------------------------------------
bool AgentMessenger::isExitFlag() const
//------------------------------------------------------------------------------
{
    bool rc;
    _flagLock.lock();
    rc = _exitFlag;
    _flagLock.unlock();
    return rc;
}

//------------------------------------------------------------------------------
void AgentMessenger::setExitFlag(bool isExit)
//------------------------------------------------------------------------------
{
    _flagLock.lock();
    _exitFlag = isExit;
    _flagLock.unlock();
}

//------------------------------------------------------------------------------
bool AgentMessenger::start()
//------------------------------------------------------------------------------
{
    setExitFlag(false);
    QThread::start();
    return QThread::isRunning();
}

//------------------------------------------------------------------------------
void AgentMessenger::stop()
//------------------------------------------------------------------------------
{
    setExitFlag(true);
    QThread::wait();
}

} // Ugv1
